---
import { getLocalizedValue, type Locale } from '../../i18n';
import type { Service, Specialist } from '../../types/specialist';

interface Props {
  service: Service;
  specialist: Specialist;
  locale: Locale;
  translations: {
    services: {
      featured: string;
      minutes: string;
      bookNow: string;
    };
    whatsapp: {
      greetingWithService: string;
    };
  };
}

const { service, specialist, locale, translations: t } = Astro.props;
const serviceName = getLocalizedValue(service.name, locale);
const whatsappMessage = t.whatsapp.greetingWithService.replace('{service}', serviceName);
---

<div class="service-card p-6">
  {service.featured && (
    <span class="inline-block px-2 py-1 text-xs font-medium rounded-full mb-3" style="background: var(--color-primary-100); color: var(--color-primary-700);">
      {t.services.featured}
    </span>
  )}
  <h3 class="text-lg font-semibold mb-2" style="color: var(--color-text-primary);">
    {serviceName}
  </h3>
  <p class="text-sm mb-4" style="color: var(--color-text-muted);">
    {getLocalizedValue(service.description, locale)}
  </p>
  <div class="flex items-center justify-between pt-4" style="border-top: 1px solid var(--color-border);">
    <div>
      <span class="text-xl font-bold" style="color: var(--color-primary-600);">
        {service.currency} {service.price}
      </span>
      <span class="text-sm ml-2" style="color: var(--color-text-muted);">
        {service.duration} {t.services.minutes}
      </span>
    </div>
    <a
      href={`https://wa.me/${specialist.contact.whatsapp.replace(/[^0-9]/g, '')}?text=${encodeURIComponent(whatsappMessage)}`}
      target="_blank"
      rel="noopener noreferrer"
      class="text-sm font-medium transition-colors"
      style="color: var(--color-primary-600);"
    >
      {t.services.bookNow} &rarr;
    </a>
  </div>
</div>
